var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function s(t){return document.createTextNode(t)}function d(){return s(" ")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t){return""===t?null:+t}function g(t,e){t.value=null==e?"":e}let m;function $(t){m=t}function y(t){(function(){if(!m)throw new Error("Function called outside component initialization");return m})().$$.on_mount.push(t)}const w=[],v=[],x=[],b=[],_=Promise.resolve();let k=!1;function E(t){x.push(t)}let L=!1;const j=new Set;function D(){if(!L){L=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];$(e),I(e.$$)}for($(null),w.length=0;v.length;)v.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];j.has(e)||(j.add(e),e())}x.length=0}while(w.length);for(;b.length;)b.pop()();k=!1,L=!1,j.clear()}}function I(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const T=new Set;function U(t,e){t&&t.i&&(T.delete(t),t.i(e))}function A(t,e,n,o){if(t&&t.o){if(T.has(t))return;T.add(t),undefined.c.push(()=>{T.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function C(t){t&&t.c()}function P(t,n,r){const{fragment:u,on_mount:a,on_destroy:c,after_update:l}=t.$$;u&&u.m(n,r),E(()=>{const n=a.map(e).filter(i);c?c.push(...n):o(n),t.$$.on_mount=[]}),l.forEach(E)}function O(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function R(t,e){-1===t.$$.dirty[0]&&(w.push(t),k||(k=!0,_.then(D)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function S(e,i,r,u,a,l,s=[-1]){const d=m;$(e);const h=i.props||{},f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:s,skip_bound:!1};let p=!1;if(f.ctx=r?r(e,h,(t,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&R(e,t)),n}):[],f.update(),p=!0,o(f.before_update),f.fragment=!!u&&u(f.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);f.fragment&&f.fragment.l(t),t.forEach(c)}else f.fragment&&f.fragment.c();i.intro&&U(e.$$.fragment),P(e,i.target,i.anchor),D()}$(d)}class z{$destroy(){O(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function M(e){let n,i,r,p,m,$,y,w,v,x,b,_,k,E,L,j,D,I,T,U,A,C,P,O,R,S;return{c(){n=l("canvas"),i=d(),r=l("input"),p=d(),m=l("label"),$=s("zoom\n  "),y=l("input"),w=d(),v=l("input"),x=d(),b=l("label"),_=s("grid\n  "),k=l("input"),E=d(),L=l("input"),j=d(),D=l("label"),I=s("Global Alpha\n  "),T=l("input"),U=d(),A=l("input"),C=d(),P=l("button"),O=s(e[2]),f(r,"type","file"),f(y,"type","text"),f(y,"min","0"),f(y,"max","1"),f(v,"type","range"),f(v,"min","0"),f(v,"max","1"),f(v,"step",".0001"),f(m,"for",""),f(k,"type","text"),f(k,"min","5"),f(k,"max","20"),f(L,"type","range"),f(L,"min","5"),f(L,"max","20"),f(L,"step","1"),f(b,"for",""),f(T,"type","text"),f(T,"min","0"),f(T,"max","1"),f(A,"type","range"),f(A,"min","0"),f(A,"max","1"),f(A,"step",".001"),f(D,"for","")},m(t,o){a(t,n,o),e[7](n),a(t,i,o),a(t,r,o),a(t,p,o),a(t,m,o),u(m,$),u(m,y),g(y,e[4]),u(m,w),u(m,v),g(v,e[4]),a(t,x,o),a(t,b,o),u(b,_),u(b,k),g(k,e[3]),u(b,E),u(b,L),g(L,e[3]),a(t,j,o),a(t,D,o),u(D,I),u(D,T),g(T,e[1]),u(D,U),u(D,A),g(A,e[1]),a(t,C,o),a(t,P,o),u(P,O),R||(S=[h(r,"change",e[5]),h(y,"input",e[8]),h(v,"change",e[9]),h(v,"input",e[9]),h(k,"input",e[10]),h(L,"change",e[11]),h(L,"input",e[11]),h(T,"input",e[12]),h(A,"change",e[13]),h(A,"input",e[13]),h(P,"click",e[6])],R=!0)},p(t,[e]){16&e&&y.value!==t[4]&&g(y,t[4]),16&e&&g(v,t[4]),8&e&&k.value!==t[3]&&g(k,t[3]),8&e&&g(L,t[3]),2&e&&T.value!==t[1]&&g(T,t[1]),2&e&&g(A,t[1]),4&e&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(O,t[2])},i:t,o:t,d(t){t&&c(n),e[7](null),t&&c(i),t&&c(r),t&&c(p),t&&c(m),t&&c(x),t&&c(b),t&&c(j),t&&c(D),t&&c(C),t&&c(P),R=!1,o(S)}}}function N(t,e,n){let o,i,r,u=.1,a="slo-mo",c=10,l=1,s=1,d=0,h=0,f=0,g=0,m=new Image;return t.$$.update=()=>{393234&t.$$.dirty&&u&&(console.log(d,h,u,s),null!=i&&(n(0,o.width=800,o),n(0,o.height=500,o),i.globalAlpha=u,i.drawImage(m,d,h,r.width*s,r.height*s,0,0,o.width,r.height*o.width/r.width))),8&t.$$.dirty&&c&&(console.log(c),(()=>{if(null==i)return;console.log("running grid"),n(0,o.width=r.width,o),n(0,o.height=r.height,o);let t=r.width/o.width;i.drawImage(r,0,0,r.width,r.height,0,0,o.width,r.height/t),i.lineWidth=1,i.strokeStyle="white";for(let t=0;t<c;t++)i.beginPath(),i.moveTo(0,o.height/c*t),i.lineTo(o.width,o.height/c*t),i.closePath(),i.stroke(),i.beginPath(),i.moveTo(o.width/c*t,0),i.lineTo(o.width/c*t,o.height),i.closePath(),i.stroke();m.src=o.toDataURL()})())},[o,u,a,c,s,t=>{let e=window.webkitURL||window.URL;i=o.getContext("2d"),r=new Image,r.onload=()=>{f=r.width,g=r.height,n(0,o.width=r.width,o),n(0,o.height=r.height,o);let t=r.width/o.width;i.drawImage(r,0,0,r.width,r.height,0,0,o.width,r.height/t),m.src=o.toDataURL()};let u=e.createObjectURL(t.target.files[0]);r.src=u;let a,c,s={x:0,y:0};o.addEventListener("touchstart",(function(t){var e=t.touches[0];a={x:e.clientX*l,y:e.clientY*l}}),!1),o.addEventListener("touchmove",(function(t){var e=t.touches[0];c={x:e.clientX*l,y:e.clientY*l};let o=a.x-c.x,i=a.y-c.y;n(17,d=s.x+o),n(18,h=s.y+i)})),o.addEventListener("touchend",(function(t){s={x:s.x+(a.x-c.x),y:s.y+(a.y-c.y)}})),document.body.addEventListener("touchstart",(function(t){t.target==o&&t.preventDefault()}),{passive:!1}),document.body.addEventListener("touchend",(function(t){t.target==o&&t.preventDefault()}),{passive:!1}),document.body.addEventListener("touchmove",(function(t){t.target==o&&t.preventDefault()}),{passive:!1})},()=>{1==l?(l=.1,n(2,a="super-slow-mo")):.1==l?(l=.01,n(2,a="fast-mo")):(l=1,n(2,a="slo-mo"))},function(t){v[t?"unshift":"push"](()=>{o=t,n(0,o)})},function(){s=this.value,n(4,s)},function(){s=p(this.value),n(4,s)},function(){c=this.value,n(3,c)},function(){c=p(this.value),n(3,c)},function(){u=this.value,n(1,u)},function(){u=p(this.value),n(1,u)}]}class q extends z{constructor(t){super(),S(this,t,N,M,r,{})}}function X(e){let n;return{c(){n=l("video"),n.autoplay=!0,n.playsInline=!0,f(n,"class","svelte-1ywjyfj")},m(t,o){a(t,n,o),e[1](n)},p:t,i:t,o:t,d(t){t&&c(n),e[1](null)}}}function Y(t,e,n){let o;return y(()=>{navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){n(0,o.srcObject=t,o);const e=t.getVideoTracks()[0];new ImageCapture(e).getPhotoCapabilities().then(()=>{let t=document.querySelector("#flashlight");t.style.position="absolute",t.style["z-index"]=200,t.addEventListener("click",()=>{e.applyConstraints({advanced:[{torch:!0}]})})})})).catch((function(t){console.log("Something went wrong!",t)}))}),[o,function(t){v[t?"unshift":"push"](()=>{o=t,n(0,o)})}]}class B extends z{constructor(t){super(),S(this,t,Y,X,r,{})}}function F(e){let n,o,i,r;return n=new B({}),i=new q({}),{c(){C(n.$$.fragment),o=d(),C(i.$$.fragment)},m(t,e){P(n,t,e),a(t,o,e),P(i,t,e),r=!0},p:t,i(t){r||(U(n.$$.fragment,t),U(i.$$.fragment,t),r=!0)},o(t){A(n.$$.fragment,t),A(i.$$.fragment,t),r=!1},d(t){O(n,t),t&&c(o),O(i,t)}}}function G(t,e,n){let{name:o}=e;return t.$$set=t=>{"name"in t&&n(0,o=t.name)},[o]}return new class extends z{constructor(t){super(),S(this,t,G,F,r,{name:0})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
